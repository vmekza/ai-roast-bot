{"ast":null,"code":"var _jsxFileName = \"/Users/scarlet/TAMK/GIT/ai-roast-bot/frontend/src/components/RoastBot.js\",\n  _s = $RefreshSig$();\n// RoastBot.js\nimport React, { useState, useRef, useEffect } from 'react';\nimport ToggleSwitch from './ToggleSwitch';\nimport { getRoast } from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RoastBot() {\n  _s();\n  const [userInput, setUserInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // For toggles:\n  const [isRoastMode, setIsRoastMode] = useState(false);\n  const [voiceMode, setVoiceMode] = useState(false);\n  const chatRef = useRef(null);\n  useEffect(() => {\n    var _chatRef$current;\n    (_chatRef$current = chatRef.current) === null || _chatRef$current === void 0 ? void 0 : _chatRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages]);\n  const speakResponse = text => {\n    if (!text || !voiceMode) return;\n    const speech = new SpeechSynthesisUtterance(text);\n    speech.lang = 'en-US';\n    speech.rate = 1.1;\n    speech.pitch = 1;\n    speech.volume = 1;\n    window.speechSynthesis.speak(speech);\n  };\n  const handleVoiceInput = () => {\n    const recognition = new window.webkitSpeechRecognition() || new window.SpeechRecognition();\n    recognition.lang = 'en-US';\n    recognition.start();\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setUserInput(transcript);\n    };\n    recognition.onerror = event => {\n      console.error('Speech Recognition Error:', event.error);\n    };\n  };\n  const sendMessage = async message => {\n    if (!message.trim()) return;\n    setLoading(true);\n    const systemPrompt = isRoastMode ? `You are an AI comedian who ONLY gives funny and sarcastic roasts.\n         You MUST NEVER answer questions or provide helpful information.\n         Every response must be an insult, but lighthearted and playful.` : `You are a professional AI assistant.\n         Help users with polite, clear answers.\n         NEVER roast or insult the user.`;\n    try {\n      const response = await getRoast(message, systemPrompt);\n      setMessages(prev => [...prev, {\n        text: message,\n        sender: 'user'\n      }, {\n        text: response,\n        sender: 'ai'\n      }]);\n      if (voiceMode) speakResponse(response);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages(prev => [...prev, {\n        text: message,\n        sender: 'user'\n      }, {\n        text: 'Oops, something went wrong.',\n        sender: 'ai'\n      }]);\n    }\n    setUserInput('');\n    setLoading(false);\n  };\n\n  // Toggle roast mode => reset chat\n  const toggleRoastMode = () => {\n    setIsRoastMode(!isRoastMode);\n    setMessages([]);\n  };\n\n  // Toggle voice mode\n  const toggleVoiceMode = () => {\n    setVoiceMode(!voiceMode);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col max-w-lg mx-[500px] bg-gray-900 text-white p-6 rounded-lg shadow-md mt-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(ToggleSwitch, {\n        checked: isRoastMode,\n        onChange: toggleRoastMode,\n        leftLabel: \"Normal\",\n        rightLabel: \"Roast\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(ToggleSwitch, {\n        checked: voiceMode,\n        onChange: toggleVoiceMode,\n        leftLabel: \"Voice OFF\",\n        rightLabel: \"Voice ON\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-80 overflow-y-auto border border-gray-700 p-3 rounded-lg mb-4\",\n      children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `p-3 my-1 rounded-lg max-w-xs text-white ${msg.sender === 'user' ? 'bg-blue-500' : 'bg-gray-700'}`,\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"w-full p-2 border border-gray-600 rounded bg-gray-800 text-white\",\n      placeholder: \"Ask Bobbsey something...\",\n      value: userInput,\n      onChange: e => setUserInput(e.target.value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 mt-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"flex-1 bg-green-500 text-white p-2 rounded\",\n        onClick: () => sendMessage(userInput),\n        disabled: loading || !userInput.trim(),\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"flex-1 bg-purple-500 text-white p-2 rounded\",\n        onClick: handleVoiceInput,\n        children: \"Speak\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(RoastBot, \"ctVhF0OukHYhLOO2RgUoXjk7IqQ=\");\n_c = RoastBot;\nvar _c;\n$RefreshReg$(_c, \"RoastBot\");","map":{"version":3,"names":["React","useState","useRef","useEffect","ToggleSwitch","getRoast","jsxDEV","_jsxDEV","RoastBot","_s","userInput","setUserInput","messages","setMessages","loading","setLoading","isRoastMode","setIsRoastMode","voiceMode","setVoiceMode","chatRef","_chatRef$current","current","scrollIntoView","behavior","speakResponse","text","speech","SpeechSynthesisUtterance","lang","rate","pitch","volume","window","speechSynthesis","speak","handleVoiceInput","recognition","webkitSpeechRecognition","SpeechRecognition","start","onresult","event","transcript","results","onerror","console","error","sendMessage","message","trim","systemPrompt","response","prev","sender","toggleRoastMode","toggleVoiceMode","className","children","checked","onChange","leftLabel","rightLabel","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","index","ref","placeholder","value","e","target","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/scarlet/TAMK/GIT/ai-roast-bot/frontend/src/components/RoastBot.js"],"sourcesContent":["// RoastBot.js\nimport React, { useState, useRef, useEffect } from 'react';\nimport ToggleSwitch from './ToggleSwitch';\nimport { getRoast } from '../api';\n\nexport default function RoastBot() {\n  const [userInput, setUserInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  // For toggles:\n  const [isRoastMode, setIsRoastMode] = useState(false);\n  const [voiceMode, setVoiceMode] = useState(false);\n\n  const chatRef = useRef(null);\n\n  useEffect(() => {\n    chatRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const speakResponse = (text) => {\n    if (!text || !voiceMode) return;\n    const speech = new SpeechSynthesisUtterance(text);\n    speech.lang = 'en-US';\n    speech.rate = 1.1;\n    speech.pitch = 1;\n    speech.volume = 1;\n    window.speechSynthesis.speak(speech);\n  };\n\n  const handleVoiceInput = () => {\n    const recognition =\n      new window.webkitSpeechRecognition() || new window.SpeechRecognition();\n    recognition.lang = 'en-US';\n    recognition.start();\n\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setUserInput(transcript);\n    };\n\n    recognition.onerror = (event) => {\n      console.error('Speech Recognition Error:', event.error);\n    };\n  };\n\n  const sendMessage = async (message) => {\n    if (!message.trim()) return;\n    setLoading(true);\n\n    const systemPrompt = isRoastMode\n      ? `You are an AI comedian who ONLY gives funny and sarcastic roasts.\n         You MUST NEVER answer questions or provide helpful information.\n         Every response must be an insult, but lighthearted and playful.`\n      : `You are a professional AI assistant.\n         Help users with polite, clear answers.\n         NEVER roast or insult the user.`;\n\n    try {\n      const response = await getRoast(message, systemPrompt);\n      setMessages((prev) => [\n        ...prev,\n        { text: message, sender: 'user' },\n        { text: response, sender: 'ai' },\n      ]);\n      if (voiceMode) speakResponse(response);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages((prev) => [\n        ...prev,\n        { text: message, sender: 'user' },\n        { text: 'Oops, something went wrong.', sender: 'ai' },\n      ]);\n    }\n\n    setUserInput('');\n    setLoading(false);\n  };\n\n  // Toggle roast mode => reset chat\n  const toggleRoastMode = () => {\n    setIsRoastMode(!isRoastMode);\n    setMessages([]);\n  };\n\n  // Toggle voice mode\n  const toggleVoiceMode = () => {\n    setVoiceMode(!voiceMode);\n  };\n\n  return (\n    <div className='flex flex-col max-w-lg mx-[500px] bg-gray-900 text-white p-6 rounded-lg shadow-md mt-8'>\n      <div className='mb-4'>\n        <ToggleSwitch\n          checked={isRoastMode}\n          onChange={toggleRoastMode}\n          leftLabel='Normal'\n          rightLabel='Roast'\n        />\n      </div>\n      <div className='mb-4'>\n        <ToggleSwitch\n          checked={voiceMode}\n          onChange={toggleVoiceMode}\n          leftLabel='Voice OFF'\n          rightLabel='Voice ON'\n        />\n      </div>\n      <div className='h-80 overflow-y-auto border border-gray-700 p-3 rounded-lg mb-4'>\n        {messages.map((msg, index) => (\n          <div\n            key={index}\n            className={`flex ${\n              msg.sender === 'user' ? 'justify-end' : 'justify-start'\n            }`}\n          >\n            <p\n              className={`p-3 my-1 rounded-lg max-w-xs text-white ${\n                msg.sender === 'user' ? 'bg-blue-500' : 'bg-gray-700'\n              }`}\n            >\n              {msg.text}\n            </p>\n          </div>\n        ))}\n        <div ref={chatRef}></div>\n      </div>\n      <textarea\n        className='w-full p-2 border border-gray-600 rounded bg-gray-800 text-white'\n        placeholder='Ask Bobbsey something...'\n        value={userInput}\n        onChange={(e) => setUserInput(e.target.value)}\n      ></textarea>\n      <div className='flex gap-2 mt-3'>\n        <button\n          className='flex-1 bg-green-500 text-white p-2 rounded'\n          onClick={() => sendMessage(userInput)}\n          disabled={loading || !userInput.trim()}\n        >\n          Send\n        </button>\n        <button\n          className='flex-1 bg-purple-500 text-white p-2 rounded'\n          onClick={handleVoiceInput}\n        >\n          Speak\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}